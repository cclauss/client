

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Key Command &mdash; cloudmesh_client 4.3.2 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="cloudmesh_client 4.3.2 documentation" href="../index.html"/>
        <link rel="up" title="User Manual" href="index.html"/>
        <link rel="next" title="Flavor Command" href="command_flavor.html"/>
        <link rel="prev" title="Cloud Command" href="command_cloud.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> cloudmesh_client
          

          
          </a>

          
            
            
              <div class="version">
                4.3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../prefix.html">Prefix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Short Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference_card.html">Reference Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comet.html">Comet Virtual Cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manuals</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#shell-commands">Shell Commands</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#cloud-commands">Cloud Commands</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="command_register.html">Register Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_cloud.html">Cloud Command</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Key Command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-key-to-the-database">Adding a key to the database</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-the-ket-to-the-cloud">Adding the ket to the cloud</a></li>
<li class="toctree-l4"><a class="reference internal" href="#list-keys">List Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#get-keys">Get Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-keys">Default Keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#interactive-selection">Interactive Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#delete-keys">Delete Keys</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="command_flavor.html">Flavor Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_image.html">Image Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_list.html">List Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_secgroup.html">SecGroup Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_vm.html">VM Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_advanced.html">Advanced Command Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_nova.html">Nova Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_network.html">Network Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_sync.html">Sync Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_limits.html">Limits Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_quota.html">Quota Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="command_usage.html">Usage Command</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hpc-commands">HPC Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#comet-commands">Comet Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#proposed-commands">Proposed Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../man/man.html">Commands</a></li>
</ul>
<p class="caption"><span class="caption-text">Teaching</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../exercises.html">Exercises</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/comet_cloudmesh.html">Comet Cloudmesh Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/comet_bigdata.html">Comet Big Data Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hacking.html">Hacking</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a></li>
</ul>
<p class="caption"><span class="caption-text">Future and Old</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker</a></li>
</ul>
<p class="caption"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../code/cloudmesh_client.html">cloudmesh_client package</a></li>
</ul>
<p class="caption"><span class="caption-text">Todo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../todo.html">ToDos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon.html">Using python 2 and 3 for development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hackathon.html#python-guidelines">Python Guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">cloudmesh_client</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User Manual</a> &raquo;</li>
      
    <li>Key Command</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/commands/command_key.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="key-command">
<h1>Key Command<a class="headerlink" href="#key-command" title="Permalink to this headline">¶</a></h1>
<p>In clouds and distributed environments security keys are used for
authentication. We like to be able to register specific keys with
clouds or vms and easily use them. To do so we upload them into a key
registry in which each key is uniquely named. We use these named keys
when we start up virtual machines or log into remote machines.</p>
<p>The manual page of the <cite>key</cite> command can be found at: <a class="reference external" href="../man/man.html#key">key</a></p>
<div class="section" id="id1">
<h2>Key<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>It is imperative that users of clouds understand how to use ssh
keys. There are many great resources in the internet that describes
this topic in great deatail. We assume that you are familiare with ssh
keys. IF not you shoudl stop here and read up on them and understand
its use. To generate an id_rsa key, please use the command:</p>
<pre class="highlight"><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">ssh-keygen -t rsa -b <span class="m">4096</span> -C <span class="s2">&quot;your_email@example.com&quot;</span></span>
</pre><p>When prompted for the filename press enter. Next it is imporatnt that
you define a passphrase. <strong>Do not</strong> enter just return as this is an
unexeptable practice not tou use a password for accessing your vms.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">It is important that you choes a password becuas eif your
machine were to be compromised attackers could login on
all machines you use this key. Please read the ssh
documentation about it.
As a comparision it is like putting a bank key of a door in
the window, so that a burglar can smash the window and
get the key to go to the bank and get your gold out of
the safe.</p>
</div>
</div>
<div class="section" id="adding-a-key-to-the-database">
<h2>Adding a key to the database<a class="headerlink" href="#adding-a-key-to-the-database" title="Permalink to this headline">¶</a></h2>
<p>To add you ssh key to cloudmesh you can simply say:</p>
<pre class="highlight"><style type="text/css">
span.prompt2:before {
  content: "cm> ";
}
</style><span class="prompt2">key add --ssh</span>
</pre></div>
<div class="section" id="adding-the-ket-to-the-cloud">
<h2>Adding the ket to the cloud<a class="headerlink" href="#adding-the-ket-to-the-cloud" title="Permalink to this headline">¶</a></h2>
<p>Naturally you ned to let the clouds also know about this key, so you
need to upload it. We assume that you have a unique name defined that
can be used across all clouds. If not make sure you do so.</p>
<p>Assume a cloud default is set than you can uploadthe key with:</p>
<pre class="highlight"><span class="prompt2">key upload</span>
</pre><p>To upload it to anotherc cloud you can set the cloud default to the
other cloud and repeat the upload command or you can explicitly
specify the cloud with:</p>
<pre class="highlight"><span class="prompt2">key upload --cloud=mycloud</span>
</pre><p>where mycloud is specified in the <cite>~/.cludmesh/cloudmesh.yaml</cite> file.</p>
</div>
<div class="section" id="list-keys">
<h2>List Keys<a class="headerlink" href="#list-keys" title="Permalink to this headline">¶</a></h2>
<p>To list the keys in the registry you can use the command:</p>
<pre class="highlight"><span class="prompt2">key list</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+---------+------------------+---------------------------------+-------------------------------------------------+--------+</span>
<span class="o">|</span> <span class="n">name</span>    <span class="o">|</span> <span class="n">comment</span>          <span class="o">|</span> <span class="n">uri</span>                             <span class="o">|</span> <span class="n">fingerprint</span>                                     <span class="o">|</span> <span class="n">source</span> <span class="o">|</span>
<span class="o">+---------+------------------+---------------------------------+-------------------------------------------------+--------+</span>
<span class="o">|</span> <span class="n">albert</span>  <span class="o">|</span> <span class="n">albert</span><span class="nd">@Zweistein</span> <span class="o">|</span> <span class="n">file</span><span class="p">:</span><span class="o">///</span><span class="n">home</span><span class="o">/</span><span class="n">albert</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span>  <span class="o">|</span> <span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="n">e8</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">c7</span><span class="p">:</span><span class="mi">8</span><span class="n">e</span><span class="p">:</span><span class="n">ca</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">1</span><span class="n">a</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">8</span><span class="n">d</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">39</span> <span class="o">|</span> <span class="n">ssh</span>    <span class="o">|</span>
<span class="o">+---------+------------------+---------------------------------+-------------------------------------------------+--------+</span>
</pre></div>
</div>
<p>To change the output format you can specify it with the &#8211;format
option:</p>
<pre class="highlight"><span class="prompt2">key list --format=json</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;albert@Zweistein&quot;</span><span class="p">,</span>
          <span class="s2">&quot;kind&quot;</span><span class="p">:</span> <span class="s2">&quot;key&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;demokey&quot;</span><span class="p">,</span>
          <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-23 15:58:32&quot;</span><span class="p">,</span>
          <span class="s2">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;file:///home/key_expt/id_rsa.pub&quot;</span><span class="p">,</span>
          <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
          <span class="s2">&quot;updated_at&quot;</span><span class="p">:</span> <span class="s2">&quot;2015-09-23 16:14:41&quot;</span><span class="p">,</span>
          <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>
          <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;ssh&quot;</span><span class="p">,</span>
          <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;undefined&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fingerprint&quot;</span><span class="p">:</span> <span class="s2">&quot;4e:fc:e8:03:4e:c7:8e:ca:30:1a:54:43:8d:24:90:39&quot;</span><span class="p">,</span>
          <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;demokey&quot;</span><span class="p">,</span>
          <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;cloud&quot;</span><span class="p">:</span> <span class="s2">&quot;general&quot;</span>
      <span class="p">}</span>
  <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">we do show an abbreviation of the key for illustration.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">NOT valid command</p>
</div>
</div>
<div class="section" id="get-keys">
<h2>Get Keys<a class="headerlink" href="#get-keys" title="Permalink to this headline">¶</a></h2>
<p>To get the fingerprint of a key you can obtain it with:</p>
<pre class="highlight"><span class="prompt2">key get albert</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">alber</span><span class="p">:</span> <span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="n">e8</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">c7</span><span class="p">:</span><span class="mi">8</span><span class="n">e</span><span class="p">:</span><span class="n">ca</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">1</span><span class="n">a</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">8</span><span class="n">d</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">39</span>
</pre></div>
</div>
</div>
<div class="section" id="default-keys">
<h2>Default Keys<a class="headerlink" href="#default-keys" title="Permalink to this headline">¶</a></h2>
<p>In many cases it is convenient to just use a default key that is
set. The add command sets the key automatically. If you need to set it
by hand you can use</p>
<p>To mark key as default by name you can use the command:</p>
<pre class="highlight"><span class="prompt2">default key=albert</span>
</pre></div>
<div class="section" id="interactive-selection">
<h2>Interactive Selection<a class="headerlink" href="#interactive-selection" title="Permalink to this headline">¶</a></h2>
<p>In case you have many keys (which we do not recommend) we can set the default key also
interactively with the select option:</p>
<pre class="highlight"><span class="prompt2">key default --select</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">KEYS</span>
<span class="o">====</span>

    <span class="mi">1</span> <span class="o">-</span> <span class="n">albert</span><span class="p">:</span> <span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">fc</span><span class="p">:</span><span class="n">e8</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">4</span><span class="n">e</span><span class="p">:</span><span class="n">c7</span><span class="p">:</span><span class="mi">8</span><span class="n">e</span><span class="p">:</span><span class="n">ca</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">1</span><span class="n">a</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span><span class="mi">43</span><span class="p">:</span><span class="mi">8</span><span class="n">d</span><span class="p">:</span><span class="mi">24</span><span class="p">:</span><span class="mi">90</span><span class="p">:</span><span class="mi">39</span>
    <span class="mi">2</span> <span class="o">-</span> <span class="n">testkey</span><span class="p">:</span> <span class="mi">2</span><span class="n">d</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="n">a8</span><span class="p">:</span><span class="mi">03</span><span class="p">:</span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="n">e1</span><span class="p">:</span><span class="mi">7</span><span class="n">e</span><span class="p">:</span><span class="n">fe</span><span class="p">:</span><span class="n">b3</span><span class="p">:</span><span class="n">fa</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="n">c7</span><span class="p">:</span><span class="n">c2</span><span class="p">:</span><span class="n">cf</span><span class="p">:</span><span class="mi">01</span>
    <span class="n">q</span> <span class="o">-</span> <span class="n">quit</span>


<span class="n">Select</span> <span class="n">between</span> <span class="mi">1</span> <span class="o">-</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">choice</span> <span class="mi">2</span> <span class="n">selected</span><span class="o">.</span>
<span class="n">Setting</span> <span class="n">key</span><span class="p">:</span> <span class="n">rsa</span> <span class="k">as</span> <span class="n">default</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">ERROR in key selection</p>
</div>
</div>
<div class="section" id="delete-keys">
<h2>Delete Keys<a class="headerlink" href="#delete-keys" title="Permalink to this headline">¶</a></h2>
<p>A named key can be deleted from the registry with the command, where
&#8216;demokey&#8217; is the name of the key:</p>
<pre class="highlight"><span class="prompt2">key delete albert</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Key</span> <span class="n">demokey</span> <span class="n">deleted</span> <span class="n">successfully</span> <span class="kn">from</span> <span class="nn">database.</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">DEBUG dict info included in the result.</p>
</div>
<p>Alternatively you can also interactively select it:</p>
<pre class="highlight"><span class="prompt2">$ cm key delete --select</span>
</pre><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">ERROR in key selection</p>
</div>
<p>To delete all keys from database use:</p>
<pre class="highlight"><span class="prompt2">key delete --all</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">All</span> <span class="n">keys</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">database</span> <span class="n">deleted</span> <span class="n">successfully</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">DEBUG info included; Functionality NOT IMPLEMENTED.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="command_flavor.html" class="btn btn-neutral float-right" title="Flavor Command" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="command_cloud.html" class="btn btn-neutral" title="Cloud Command" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Gregor von Laszewski.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.3.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>