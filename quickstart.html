

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; cloudmesh_client 4.4.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="cloudmesh_client 4.4.0 documentation" href="index.html"/>
        <link rel="next" title="Reference Card" href="reference_card.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> cloudmesh_client
          

          
          </a>

          
            
            
              <div class="version">
                4.4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="prefix.html">Prefix</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
</ul>
<p class="caption"><span class="caption-text">Short Manuals</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="#help">Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="#defaults-and-variables">Defaults and Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-clouds">Accessing Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="#virtual-machines">Virtual Machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vm-quickstart">VM Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="#microsoft-azure">Microsoft Azure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hpc">HPC</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference_card.html">Reference Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Example Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="comet.html">Comet Virtual Cluster</a></li>
</ul>
<p class="caption"><span class="caption-text">User Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="man/man.html">Commands</a></li>
</ul>
<p class="caption"><span class="caption-text">Teaching</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="exercises.html">Exercises</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/comet_cloudmesh.html">Comet Cloudmesh Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/comet_bigdata.html">Comet Big Data Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Manuals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="hacking.html">Hacking</a></li>
</ul>
<p class="caption"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix</a></li>
</ul>
<p class="caption"><span class="caption-text">Future and Old</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="stack.html">Stack</a></li>
</ul>
<p class="caption"><span class="caption-text">Code</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code/cloudmesh_client.html">cloudmesh_client package</a></li>
</ul>
<p class="caption"><span class="caption-text">Todo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="todo.html">ToDos</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon.html">Using python 2 and 3 for development</a></li>
<li class="toctree-l1"><a class="reference internal" href="hackathon.html#python-guidelines">Python Guidelines</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">cloudmesh_client</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Quickstart</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/quickstart.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<span id="ref-quickstart"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This quickstart quide assumes that you have prepared your
system according to the steps documented in the Section
<a class="reference internal" href="system.html#preparation"><span class="std std-ref">Preparation</span></a>. We also strongly recommend you read
the sections <a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installation</span></a> and
<a class="reference internal" href="configuration.html#configuration"><span class="std std-ref">Configuration</span></a>.</p>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">At this time do not use the pip install as we have not
yet uploaded the newest version to pypi. Instead, plase
use the source install discussed in our manual</p>
</div>
<p>The setup of cloudmesh client is quite simple and can be done with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">cloudmesh_client</span>
</pre></div>
</div>
<p>However, you may want to read carefully our setup guide and prepare
your machine as your OS may not have the required packages installed
by default (see: <a class="reference internal" href="system.html#preparation"><span class="std std-ref">Preparation</span></a>).</p>
<p>To complete the setup you need to call the setup command in the terminal
command prompt with</p>
<pre class="highlight"><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">cm setup</span>
</pre></div>
<div class="section" id="help">
<h2>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h2>
<p>There are many commands in cloudmesh, and you can find
out more about them while typing in</p>
<pre class="highlight"><style type="text/css">
span.prompt2:before {
  content: "cm> ";
}
</style><span class="prompt2">help</span>
</pre><p>When locationg a specific command you want to know more about, lets
assume you want to know more about the command <cite>color</cite>, say</p>
<pre class="highlight"><span class="prompt2">help color</span>
</pre></div>
<div class="section" id="defaults-and-variables">
<h2>Defaults and Variables<a class="headerlink" href="#defaults-and-variables" title="Permalink to this headline">¶</a></h2>
<p>The cloudmesh shell contains a number of useful concepts. This
includes defaults, variables and configuration flags. Variables and
defaults are saved in the cloudmesh database and can thus be uses in
consecutive invocations.</p>
<p>To set a default value, for example to set the default cloud to kilo use:</p>
<pre class="highlight"><span class="prompt2">default cloud=kilo</span>
</pre><p>Some defaults are also set via special commands to make the use more prominent.
To configure color output of the cloudmesh shell use:</p>
<p>For example to set the refresh behavior to update a list command from
a cloud before display you can either use the command:</p>
<pre class="highlight"><span class="prompt2">refresh on</span>
</pre><p>or</p>
<pre class="highlight"><span class="prompt2">default refresh=True</span>
</pre><p>To use such values in variables, we can declare a variable to store the current value of a cloud in it as follows</p>
<pre class="highlight"><span class="prompt2">var mycloud=default.cloud</span>
</pre><p>While the default value will always return the data stored in the default cache, the above
command reads at time of invocation the value and stores it in the variable. If the default
would be changed the variable still contains the old value. Through the separation of defults
and variables we are supporting a very flexible mechanism to allow integration in scripts.</p>
<p>To use a variable in a script we can simply use the variable with a $ infront of the name.</p>
<pre class="highlight"><span class="prompt2">banner $mycloud</span>
</pre></div>
<div class="section" id="accessing-clouds">
<h2>Accessing Clouds<a class="headerlink" href="#accessing-clouds" title="Permalink to this headline">¶</a></h2>
<p>Naturally, you want to get started with clouds. In case you have a
username and project in futuresystems using cloudmesh is easy. Only
thing you need is an entry in the .ssh/config file with the machine
name india, like follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Host</span> <span class="n">india</span>
<span class="n">Hostname</span> <span class="n">india</span><span class="o">.</span><span class="n">futuresystems</span><span class="o">.</span><span class="n">org</span>
<span class="n">User</span> <span class="n">albert</span>
</pre></div>
</div>
<p>Next you can register the cloud(s) with:</p>
<pre class="highlight"><span class="prompt2">register remote</span>
</pre><p>This will fetch the necessary credentials from the cloud,
and populate the cloudmesh.yaml file for you. At this time it will
update an entry for a cloud named kilo.</p>
<p>In case you want to add other clouds such as chameleon you can use the
command</p>
<pre class="highlight"><span class="prompt2">register chameleon</span>
</pre><p>This command will than interactively ask you for information about
the cloud credentials and update the yaml file accordingly. To set the
default cloud use the <cite>default</cite> command.</p>
<p>If you need to view the flavors and images in the cloud, use:</p>
<pre class="highlight"><span class="prompt2">image refresh</span>
<span class="prompt2">flavor refresh</span>
</pre><p>The refresh commands are not necessary if you use <cite>refresh
on</cite>. However in this case every time you invoke a list command the
cloud is contacted and the data is updated. IF you do not use refresh,
the data is read from an internal database.</p>
<p>To list the images, flavors, and vms use the following:</p>
<pre class="highlight"><span class="prompt2">image list</span>
<span class="prompt2">flavor list</span>
<span class="prompt2">vm list</span>
</pre><p>To se a selected number of important defaults for the clouds use the
command</p>
<pre class="highlight"><span class="prompt2">vm info</span>
</pre><p>To set default flavor and image use, inspect the results from the list
commands, decide which you want to use, and simply set them for the
current default cloud. Also make sure that the image size is
appropriate. Some images will not fit in a small flavor.
And as always, please assure proper spelling of the image name:</p>
<pre class="highlight"><span class="prompt2">default image=Ubuntu-14.04-64</span>
<span class="prompt2">default flavor=m1.small</span>
</pre><p>When starting vms the vms are added to a default group. The initial
default group name is simply &#8216;default&#8217;. If you like to change it you
can set it with the following command:</p>
<pre class="highlight"><span class="prompt2">default group=experiment_a</span>
</pre><p>Next, you need to upload your ssh keys to the cloud. If you already
have a key-pair you can use it, or else you can generate ssh keys using:</p>
<pre class="highlight"><span class="prompt1">ssh-keygen -t rsa -C albert@gmail.com</span>
</pre><p>This will generate a keypair id_rsa.pub (public key) and id_rsa (private key)
in the ~/.ssh/ directory. Next you need to add this key to cloudmesh
with:</p>
<pre class="highlight"><span class="prompt2">key add --ssh</span>
</pre><p>You can list the keys in the key database by using:</p>
<pre class="highlight"><span class="prompt2">key list</span>
</pre><p>The output would look something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+--------+------------------+-------------------------------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">name</span>   <span class="o">|</span> <span class="n">comment</span>          <span class="o">|</span> <span class="n">uri</span>                                 <span class="o">|</span> <span class="n">fingerprint</span>  <span class="o">|</span> <span class="n">source</span> <span class="o">|</span>
<span class="o">+--------+------------------+-------------------------------------+--------------+--------+</span>
<span class="o">|</span> <span class="n">id_rsa</span> <span class="o">|</span> <span class="n">albert</span><span class="nd">@gmail</span><span class="o">.</span><span class="n">com</span> <span class="o">|</span> <span class="n">file</span><span class="p">:</span><span class="o">///</span><span class="n">home</span><span class="o">/</span><span class="n">albert</span><span class="o">/.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="o">.</span><span class="n">pub</span> <span class="o">|</span> <span class="mi">64</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span> <span class="o">....</span>  <span class="o">|</span> <span class="n">ssh</span>    <span class="o">|</span>
<span class="o">+--------+------------------+-------------------------------------+--------------+--------+</span>
</pre></div>
</div>
<p>Next the key needs to be uploaded to the cloud. Here we take advantage
of the default cloud being automatically used:</p>
<pre class="highlight"><span class="prompt2">key upload</span>
</pre><p>in case you want to upload it to another cloud you can set the default
cloud and repeat this command, or simply specify the cloud as a
parameter:</p>
<pre class="highlight"><span class="prompt2">key upload --cloud=chameleon</span>
</pre></div>
<div class="section" id="virtual-machines">
<h2>Virtual Machines<a class="headerlink" href="#virtual-machines" title="Permalink to this headline">¶</a></h2>
<p>If you have followed this document till this point, you are all set
to start a new VM in the cloud. This section explains how to do that.</p>
<p>First, make sure all defaults are correctly set.</p>
<pre class="highlight"><span class="prompt2">vm default</span>
</pre><p>The output will look somewhat similar to the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+-----------+---------------+</span>
<span class="o">|</span> <span class="n">Attribute</span> <span class="o">|</span> <span class="n">Value</span>         <span class="o">|</span>
<span class="o">+-----------+---------------+</span>
<span class="o">|</span> <span class="n">secgroup</span>  <span class="o">|</span>               <span class="o">|</span>
<span class="o">|</span> <span class="n">name</span>      <span class="o">|</span> <span class="n">albert</span><span class="o">-</span><span class="mi">001</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">image</span>     <span class="o">|</span> <span class="n">Ubuntu</span> <span class="mf">14.04</span>  <span class="o">|</span>
<span class="o">|</span> <span class="n">cloud</span>     <span class="o">|</span> <span class="n">kilo</span>          <span class="o">|</span>
<span class="o">|</span> <span class="n">group</span>     <span class="o">|</span> <span class="n">test</span><span class="o">-</span><span class="n">group</span>    <span class="o">|</span>
<span class="o">|</span> <span class="n">key</span>       <span class="o">|</span> <span class="n">id_rsa</span>        <span class="o">|</span>
<span class="o">|</span> <span class="n">flavor</span>    <span class="o">|</span> <span class="n">m1</span><span class="o">.</span><span class="n">tiny</span>       <span class="o">|</span>
<span class="o">|</span> <span class="n">login_key</span> <span class="o">|</span>               <span class="o">|</span>
<span class="o">+-----------+---------------+</span>
<span class="n">info</span><span class="o">.</span> <span class="n">OK</span><span class="o">.</span>
</pre></div>
</div>
<p>Starting a VM now is as simple as executing a single command.</p>
<pre class="highlight"><span class="prompt2">vm boot</span>
</pre><p>This will start up a new VM in your default cloud.
You need to refresh the database before listing VMs.</p>
<pre class="highlight"><span class="prompt2">vm refresh</span>
<span class="prompt2">vm list</span>
</pre><p>The output will look something like follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+</span>
<span class="o">|</span> <span class="nb">id</span> <span class="o">|</span> <span class="n">uuid</span>         <span class="o">|</span> <span class="n">label</span>      <span class="o">|</span> <span class="n">status</span> <span class="o">|</span> <span class="n">static_ip</span> <span class="o">|</span> <span class="n">floating_ip</span> <span class="o">|</span> <span class="n">key_name</span> <span class="o">|</span> <span class="n">project</span> <span class="o">|</span> <span class="n">user</span>   <span class="o">|</span> <span class="n">cloud</span> <span class="o">|</span>
<span class="o">+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+</span>
<span class="o">|</span> <span class="mi">47</span> <span class="o">|</span> <span class="mi">8</span><span class="n">af4177f</span><span class="o">-...</span> <span class="o">|</span> <span class="n">albert</span><span class="o">-</span><span class="mi">001</span> <span class="o">|</span> <span class="n">ACTIVE</span> <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.37</span> <span class="o">|</span>             <span class="o">|</span> <span class="n">id_rsa</span>   <span class="o">|</span> <span class="n">fg478</span>   <span class="o">|</span> <span class="n">albert</span> <span class="o">|</span> <span class="n">kilo</span>  <span class="o">|</span>
<span class="o">+----+--------------+------------+--------+-----------+-------------+----------+---------+--------+-------+</span>
</pre></div>
</div>
<p>Congratulations! you have now learnt how to set up cloudmesh, and use it to start a VM.
Next step naturally is to login to the virtual machine. To do so, we need to assign it
a public IP (also called floating IP).</p>
<p>To associate a floating ip to an instance (albert-001) in our case, use:</p>
<pre class="highlight"><span class="prompt2">vm ip assign albert-001</span>
</pre><p>Listing VMs will now show you this floating ip:</p>
<pre class="highlight"><span class="prompt2">vm list</span>
</pre><div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+</span>
<span class="o">|</span> <span class="nb">id</span> <span class="o">|</span> <span class="n">uuid</span>         <span class="o">|</span> <span class="n">label</span>      <span class="o">|</span> <span class="n">status</span> <span class="o">|</span> <span class="n">static_ip</span> <span class="o">|</span> <span class="n">floating_ip</span>  <span class="o">|</span> <span class="n">key_name</span> <span class="o">|</span> <span class="n">project</span> <span class="o">|</span> <span class="n">user</span>   <span class="o">|</span> <span class="n">cloud</span> <span class="o">|</span>
<span class="o">+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+</span>
<span class="o">|</span> <span class="mi">47</span> <span class="o">|</span> <span class="mi">8</span><span class="n">af4177f</span><span class="o">-...</span> <span class="o">|</span> <span class="n">albert</span><span class="o">-</span><span class="mi">001</span> <span class="o">|</span> <span class="n">ACTIVE</span> <span class="o">|</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">2.37</span> <span class="o">|</span> <span class="mf">152.25</span><span class="o">.</span><span class="mf">6.101</span> <span class="o">|</span> <span class="n">id_rsa</span>   <span class="o">|</span> <span class="n">fg478</span>   <span class="o">|</span> <span class="n">albert</span> <span class="o">|</span> <span class="n">kilo</span>  <span class="o">|</span>
<span class="o">+----+--------------+------------+--------+-----------+--------------+----------+---------+--------+-------+</span>
</pre></div>
</div>
<p>Logging into the cloud is now as simple as:</p>
<pre class="highlight"><span class="prompt2">vm ssh albert-001</span>
</pre><p>This should get you through to the ssh session to the VM.The user name
to be used at login is either automatically detected and added to the
vm information. If you like to change the username for the login you can use the
username parameter</p>
<pre class="highlight"><span class="prompt2">vm ssh albert-001 --username=ubuntu</span>
</pre><p>To change the default username for a vm you can use the command</p>
<pre class="highlight"><span class="prompt2">vm username ubuntu albert-001</span>
</pre><p>This will set the username for the vm <cite>albert-001</cite> to <cite>ubuntu</cite></p>
<p>To delete a VM, you use the vm name:</p>
<pre class="highlight"><span class="prompt2">vm delete albert-001</span>
</pre></div>
<div class="section" id="vm-quickstart">
<h2>VM Quickstart<a class="headerlink" href="#vm-quickstart" title="Permalink to this headline">¶</a></h2>
<p>To summarize the steps to start a working cloudmesh client and prepare
a simple default while using the <cite>futuresystems.org</cite> cloud use the commands:</p>
<pre class="highlight"><span class="prompt2">key add --ssh</span>
<span class="prompt2">register remote</span>
<span class="prompt2">default cloud=kilo</span>
<span class="prompt2">refresh on</span>
<span class="prompt2">info</span>
</pre><p>Inspect the info and see if the settings satisfy your needs. Change
them accordingly with the cloudmesh commands.</p>
<p>Now booting and managing a vm is real simple</p>
<pre class="highlight"><span class="prompt2">vm boot</span>
<span class="prompt2">vm ip assign</span>
<span class="prompt2">vm ssh</span>
</pre><p>And to delete the vm</p>
<pre class="highlight"><span class="prompt2">vm delete --force</span>
</pre></div>
<div class="section" id="microsoft-azure">
<h2>Microsoft Azure<a class="headerlink" href="#microsoft-azure" title="Permalink to this headline">¶</a></h2>
<p>To connect to the Azure cloud, you need your Azure subscription ID and a valid management
certificate. You can obtain your subscription ID through the Azure classic portal.</p>
<p>Next, you need to create two certificates, one for the server (a .cer file) and one for the
client (a .pem file).</p>
<ol class="arabic simple">
<li>To create the .pem file, execute this:</li>
</ol>
<pre class="highlight"><span class="prompt1">openssl req -x509 -nodes -days <span class="m">365</span> -newkey rsa:1024 -keyout mycert.pem -out mycert.pem</span>
</pre><ol class="arabic simple" start="2">
<li>To create the .cer certificate, execute this:</li>
</ol>
<pre class="highlight"><span class="prompt1">openssl x509 -inform pem -in mycert.pem -outform der -out mycert.cer</span>
</pre><p>Place the certifocates into the directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">~/.</span><span class="n">cloudmesh</span>
</pre></div>
</div>
<p>This subscription ID and Management certificate path has to be added in the cloudmesh.yaml file.
Ex:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">credentials</span><span class="p">:</span>
            <span class="n">managementcertfile</span><span class="p">:</span> <span class="o">~/.</span><span class="n">cloudmesh</span><span class="o">/</span><span class="n">mycert</span><span class="o">.</span><span class="n">pem</span>
            <span class="n">subscriptionid</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">subscription</span><span class="o">-</span><span class="nb">id</span><span class="o">&gt;</span>
            <span class="n">location</span><span class="p">:</span> <span class="n">Cemtral</span> <span class="n">US</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">is it pem or cer</p>
</div>
<p>The default Azure Location will be &#8220;Central US&#8221;, but it is configurable in cloudmesh.yaml file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">does not say how</p>
</div>
<p>Other than the regular commands, there is one extra command (Akey) in Azure which is needed to create VMs with
certificates and SSH keys.</p>
<p>Akey Command Syntax:</p>
<pre class="highlight"><span class="prompt1">akey add --name<span class="o">=</span>key-name --pub<span class="o">=</span>pub-key-path --cert<span class="o">=</span>pem-certificate-file-path --pfx<span class="o">=</span>pfx-file-path</span>
</pre><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>in a future version of cloudmesh this command will be merged into the key command and use the name of
the azure cloud in the yaml file to identify it</p>
<p class="last">key add &#8211;cloud= azure &#8211;name=key-name &#8211;pub=pub-key-path &#8211;cert=pem-certificate-file-path &#8211;pfx=pfx-file-path</p>
</div>
<p>To create a new VM deployment in the Azure cloud with an SSH key it is mandatory to have a
certificate associated with it. The steps to create a Key pair and a certificate are:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Create a RSA key and self signed certificate:</li>
</ol>
<pre class="highlight"><span class="prompt1">openssl req -x509 -newkey rsa:2048 -keyout mycer.key -out mycer.pem -days <span class="m">365</span> -nodes</span>
</pre><ol class="arabic simple" start="2">
<li>Create PFX:</li>
</ol>
<pre class="highlight"><span class="prompt1">openssl pkcs12 -export -out mycer.pfx -inkey mycer.key -in mycer.pem</span>
</pre><ol class="arabic simple" start="3">
<li>Create Public key from Private key:</li>
</ol>
<pre class="highlight"><span class="prompt1">ssh-keygen -y -f mycer.key &gt; mycer.pub</span>
</pre></div></blockquote>
<p>Some sample commands:</p>
<ol class="arabic simple">
<li>To fetch the List of VMs:</li>
</ol>
<pre class="highlight"><span class="prompt1">cm default <span class="nv">cloud</span><span class="o">=</span>azure</span>
<span class="prompt1">cm vm refresh</span>
<span class="prompt1">cm vm list</span>
</pre><ol class="arabic simple" start="2">
<li>To fetch the list of Images:</li>
</ol>
<pre class="highlight"><span class="prompt1">cm default <span class="nv">cloud</span><span class="o">=</span>azure</span>
<span class="prompt1">cm image refresh</span>
<span class="prompt1">cm image list</span>
</pre><ol class="arabic simple" start="3">
<li>To fetch the list of Flavors:</li>
</ol>
<pre class="highlight"><span class="prompt1">cm default <span class="nv">cloud</span><span class="o">=</span>azure</span>
<span class="prompt1">cm flavor refresh</span>
<span class="prompt1">cm flavor list</span>
</pre><ol class="arabic simple" start="4">
<li>To create a new VM instance and SSH to that instance:</li>
</ol>
<pre class="highlight"><span class="prompt1">cm akey add --name<span class="o">=</span>test-key --pub<span class="o">=</span><span class="s2">&quot;mycer.pub&quot;</span> --cert<span class="o">=</span><span class="s2">&quot;mycer.pem&quot;</span> --pfx<span class="o">=</span><span class="s2">&quot;mycer.pfx&quot;</span></span>
<span class="prompt1">cm default <span class="nv">key</span><span class="o">=</span>test-key</span>
<span class="prompt1">cm vm boot</span>
<span class="prompt1">cm vm ssh username-001 --key<span class="o">=</span>mycer.key</span>
</pre></div>
<div class="section" id="hpc">
<h2>HPC<a class="headerlink" href="#hpc" title="Permalink to this headline">¶</a></h2>
<p>In order to use the HPC experiment management functionality, you must
register the queuing system in the yaml file and register the login
node in the .ssh/config file. If you are using india and have used the
clouds before, you may have already done this.</p>
<p>To start a command such as uname and execute a command you can say:</p>
<pre class="highlight"><span class="prompt2">run uname</span>
</pre><p>It will print a job number that you may use to interact with the
system further to for example list the output</p>
<pre class="highlight"><span class="prompt2">run list 101</span>
</pre><p>(We assume here 101 is your job id)</p>
<p>To see the status and the output you can say</p>
<pre class="highlight"><span class="prompt2">run status 101</span>
<span class="prompt2">run output 101</span>
</pre></div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference_card.html" class="btn btn-neutral float-right" title="Reference Card" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Gregor von Laszewski.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>